webpackJsonp([1],{"1ihN":function(t,e){},"34KM":function(t,e){},"7esB":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAFNklEQVRoQ+2abWwURRjH/7M9bEtr0kRNCpj0SICYVuB6O7O0FOgdklaxRdIUNVQs0tKzjdIUpAHTCCRNMEFbggmKiuWUROMHX1DKBxMtMbEt3VOiSeMX4xEVEvvJ1DbY2B0ze2y53m171+vZO5adT3e78/ab/zPzzDM7BHdZIncZL2xgqytuK2wrbLERsE16LoJSKn9MCDZxjt8zM7O8ExM3LwDwhNVxnXNSB/AmSUI15/xHSeJ7Bwd/GJ5LO8XFxQUOh/QFgNVDQ4F5iZRwYcZkPr3TkgfQ+iJBOOdHCSFHw59zTryqqkblNRsERVHuAyY/4xwbxPu5lDWrLyFgxtyfA2TbTMD19Xvg97+nvw4HlmWKQEAVj3/Lybl3VV9f383ZlC4sLLxn8eLsTwjB40a+FAHLfwBYWlq6Hv39393qy22FOzqOoLPzWBRwebkXly9/oz+XJK0olmkzJr8DoDFR60iiwiFzrq9/Dn5/TxTw4cMdOH68c1bgWEoxxrYA2leikpKSUgwM9N+qL/7psGDABw8ewokTr84LmFL5S2HKOTk5aGp6Ht3dr6cv8P79L6Gr67WEgSmluwjh74sKtmypQFnZBhw79kr6Au/b14ZTp7oTBmZMHgSg5Ofno7HRh4yMjPQGbml5EadPv5EQ8Lp1slfT8LUovH17Ddauden1pLXCPl8zzpx5MyFgxuSTAFpXrFiJurpdU+tOWgM3NDTh7Nm35wzs8XiyxsdHf+YcBdXVT8DtltMPuLf3IkZG/pzmAZqbX8D5836Mjo5Oex7uh83cEqX0aUL4h6KQz9cCMYeNlDYKX7sW1HdPAk64kMLCImzdWoUrVwZw6VLvVIeXLFmqu5fZOs6YLMxib15eHlpb908brDQB3gOn02nm3/VnY2NjGBkZ0X8b+WIAXwWwtqjoYdTWPnnnAZuNxEzAsizfL0nQR6ey8jF9dxWeUq2wmLQPeDxeiHkZbwoGg1NBhaZhTSAQ+MkoSyndSgi/aDZ/U+6WFEX+VoRrYq4JYJerOCazgBWBQzD4q55X05AXCAT+ug3sFmHkkezsbLS3H46qL6UKU0o9hPBQ2BORdux4Sl+4Jib+wblzPbhx43pUHs55m6p+L/ztVGJMFlHI7pUrV2HnzmfSC1j0hlJaRojWHhkXG2Yebr5G7wnBoKaRk6qqfhRJxJgsBtBTUrIelZWPph+w0SOXy5XncDhchPAjosNmwMLnOhz/BgcGrgZnsn3GZGHrzqqqbRAHBZEppSZt1mlDITPgeM6hjCMjcVpi5uosBVxS4nJOTmboq9mBA+3Izc21tsLGIpiZmYVDh142tXpLKcyYezdAepYtexCNjU3WB6Y05INnckkp33gke9EyYuDVq9egpqbW+goriuznHM8ypuiRllmy2BymFwBevXFjOTZvfsT6wJTKnxKC7YJUKCyUtvTGQ5blhyRJHMsSJkA3bSqH1ztdaUuZtIAUW9RFiyS/sTcX51niXMtIlgM2wBTF/RbnxCf+l5aWoaKiUn9lWeBQJBbyy07ncv37lQ0c57dls+U+oe/Dyd54RNZnK2zP4fiuS9gmDSTvruV8TzzC1bDnsD2H7TlsGmHZi9b/tWgVFCzXB9e4nBbPMe0du2iZmdF8gI36jG9Sse53xbLtpG0tKXV3EULaohsk/UND6vpYHQl/ryi0gXP+rlmZeG7wzdZW0oBDUQ4Nv0mrtzs+Pq4ODw//PRdgI2KKLiP9oqrqB3OtKzx/UoHn05GFKmsDL9RIp6odW+FUjfxCtfsfvtdTeVuZQwkAAAAASUVORK5CYII="},BtY8:function(t,e){},CRJ9:function(t,e){},HNWn:function(t,e){},JKiR:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("k3b4");var o=s("+2ln"),n=(s("XmAh"),s("il3B")),a=(s("FO5P"),s("woHG")),r=(s("nOaS"),s("pIDD")),i=s("7+uW"),l=s("GQaK"),c=s("bOdI"),d=s.n(c),u=s("mvHQ"),h=s.n(u),p={props:{food:{type:Object}},created:function(){},methods:{addCart:function(t){t._constructed&&(this.food.count?this.food.count++:(i.a.set(this.food,"count",1),this.food.count=1),this.$emit("cart-add",t.target))},descreaseCart:function(t){t._constructed&&this.food.count&&this.food.count--}}},f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cartcontrol"},[s("transition",{attrs:{name:"move"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count>0,expression:"food.count > 0"}],staticClass:"cart-descrease",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.descreaseCart(e)}}},[s("span",{staticClass:"inner icon-remove_circle_outline"})])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count>0,expression:"food.count > 0"}],staticClass:"cart-count"},[t._v(t._s(t.food.count))]),t._v(" "),s("div",{staticClass:"cart-add icon-add_circle",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addCart(e)}}})],1)},staticRenderFns:[]};var v=s("VU/8")(p,f,!1,function(t){s("cHJS")},null,null).exports,g={props:{selectFoods:{type:Array,default:function(){return[]}},deliveryPrice:{type:Number,default:0},minPrice:{type:Number,default:0},appl:{type:Object}},data:function(){return{balls:[{show:!1},{show:!1},{show:!1},{show:!1},{show:!1}],dropBalls:[],fold:!0}},computed:{totalPrice:function(){var t=0;return this.selectFoods.forEach(function(e){t+=e.foodPrice*e.count}),t},totalCount:function(){var t=0;return this.selectFoods.forEach(function(e){t+=e.count}),t},payDesc:function(){return 0===this.totalPrice?"请选择菜品":this.totalPrice<this.minPrice?"还差￥"+(this.minPrice-this.totalPrice)+"元起送":"去结算"},payClass:function(){return this.totalPrice<this.minPrice?"not-enough":"enough"},listShow:function(){var t=this;if(!this.totalCount)return this.fold=!0,!1;var e=!this.fold;return e&&this.$nextTick(function(){t.scroll?t.scroll.refresh():t.scroll=new l.a(t.$refs.listContent,{click:!0})}),e}},methods:{_drop:function(t){var e=this;this.$nextTick(function(){e.drop(t)})},drop:function(t){for(var e=0;e<this.balls.length;e++){var s=this.balls[e];if(!s.show)return s.show=!0,s.el=t,void this.dropBalls.push(s)}},beforeEnter:function(t){for(var e=this.balls.length;e--;){var s=this.balls[e];if(s.show){var o=s.el.getBoundingClientRect(),n=o.left-32,a=-(window.innerHeight-o.top-22);t.style.display="",t.style.webkitTransform="translate3d(0,"+a+"px,0)",t.style.transform="translate3d(0,"+a+"px,0)";var r=t.getElementsByClassName("inner-hock")[0];r.style.webkitTransform="translate3d("+n+"px, 0, 0)",r.style.transform="translate3d("+n+"px, 0, 0)"}}},enter:function(t){t.offsetHeight;this.$nextTick(function(){t.style.webkitTransform="translate3d(0, 0, 0)",t.style.transform="translate3d(0, 0, 0)";var e=t.getElementsByClassName("inner-hock")[0];e.style.webkitTransform="translate3d(0, 0, 0)",e.style.transform="translate3d(0, 0, 0)"})},afterEnter:function(t){var e=this.dropBalls[0];e&&(e.show=!1,t.style.display="none")},toggleList:function(){this.totalCount&&(this.fold=!this.fold)},empty:function(){this.selectFoods.forEach(function(t){t.count=0})},hideList:function(){this.fold=!0},pay:function(){var t=this;this.totalPrice<=0||(console.log(h()(this.selectFoods)),console.log(h()(this.appl)),null==this.appl?this.$http({method:"post",url:"https://zhl.lululuye.xyz/wpark_test/order/canteen-order/orderInsert",headers:{"Content-Type":"application/json"},data:h()(this.selectFoods)}).then(function(e){200===(e=e.data).resultCode?n.a.alert({message:"提交订单成功！"}).then(function(){t.$router.go(-1)}):(Object(n.a)({message:e.resultMsg}),console.log(e.resultMsg))}).catch(function(t){Object(n.a)({message:"服务器开小差，请联系管理员！"}),console.log(t)}):(console.log(this.appl),this.appl.requestOrderVos=this.selectFoods,this.$http({method:"post",url:"https://zhl.lululuye.xyz/wpark_test/order/canteen-order/updateCanteenOrder",headers:{"Content-Type":"application/json"},data:h()(this.appl)}).then(function(e){200===(e=e.data).resultCode?t.$router.push({name:"order"}):(window.alert(e.resultMsg),console.log(e.resultMsg))}).catch(function(t){console.log(t)})))}},components:d()({cartcontrol:v},n.a.Component.name,n.a.Component)},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"shopcart"},[s("div",{staticClass:"content",on:{click:t.toggleList}},[s("div",{staticClass:"content-left"},[s("div",{staticClass:"logo-wrapper"},[s("div",{staticClass:"logo",class:{highlight:t.totalCount>0}},[s("i",{staticClass:"icon-shopping_cart",class:{highlight:t.totalCount>0}})]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.totalCount>0,expression:"totalCount > 0"}],staticClass:"num"},[t._v(t._s(t.totalCount))])]),t._v(" "),s("div",{staticClass:"price",class:{highlight:t.totalPrice>0}},[t._v("￥"+t._s(t.totalPrice))]),t._v(" "),s("div",{staticClass:"desc"})]),t._v(" "),s("div",{staticClass:"content-right",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.pay(e)}}},[s("div",{staticClass:"pay",class:t.payClass},[t._v("\n\t\t\t\t\t"+t._s(t.payDesc)+"\n\t\t\t\t")])])]),t._v(" "),s("div",{staticClass:"ball-container"},t._l(t.balls,function(e){return s("transition",{key:e.key,attrs:{name:"drop"},on:{"before-enter":t.beforeEnter,enter:t.enter,"after-enter":t.afterEnter}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"ball.show"}],staticClass:"ball"},[s("div",{staticClass:"inner inner-hock"})])])}),1),t._v(" "),s("transition",{attrs:{name:"fold"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"shopcart-list"},[s("div",{staticClass:"list-header"},[s("h1",{staticClass:"title"},[t._v("购物车")]),t._v(" "),s("span",{staticClass:"empty",on:{click:t.empty}},[t._v("清空")])]),t._v(" "),s("div",{ref:"listContent",staticClass:"list-content"},[s("ul",t._l(t.selectFoods,function(e){return s("li",{key:e.key,staticClass:"food"},[s("span",{staticClass:"name"},[t._v(t._s(e.foodName))]),t._v(" "),s("div",{staticClass:"price"},[s("span",[t._v("￥"+t._s(e.foodPrice*e.count))])]),t._v(" "),s("div",{staticClass:"cartcontrol-wrapper"},[s("cartcontrol",{attrs:{food:e},on:{"cart-add":t._drop}})],1)])}),0)])])])],1),t._v(" "),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"list-mask",on:{click:t.hideList}})])],1)},staticRenderFns:[]};var C=s("VU/8")(g,m,!1,function(t){s("CRJ9")},null,null).exports,w={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("h3",[this._v("珠海本部周末早点打包外卖")])])}]};var _=s("VU/8")({},w,!1,function(t){s("HNWn")},null,null).exports,y={data:function(){return{goods:[],foods:[],appl:null,scrollY:0,showLoading:!0}},created:function(){var t=this,e=this.$route.query.updateAppl;null==e?this.$http({method:"post",url:"https://zhl.lululuye.xyz/wpark_test/canteen/menu/findCanteenMenuThisWeek",data:{}}).then(function(e){if(t.showLoading=!1,e=e.data,console.log(e),200===e.resultCode){if(null===e.resultData)return void Object(n.a)({message:"未到预定时间！"});t.foods=e.resultData.menuDetails,t.$nextTick(function(){t._initScroll()})}else Object(n.a)({message:e.resultMsg}),console.log(e.resultMsg)}).catch(function(t){Object(n.a)({message:"服务器开小差，请联系管理员！"}),console.log(t)}):(this.appl=JSON.parse(e),console.log(this.appl),this.foods=this.appl.foodOrders,this.$nextTick(function(){t._initScroll()}))},computed:{currentIndex:function(){for(var t=0;t<this.listHeight.length;t++){var e=this.listHeight[t],s=this.listHeight[t+1];if(!s||this.scrollY>=e&&this.scrollY<s)return t}},selectFoods:function(){var t=[];return null!=this.$route.query.updateAppl?this.foods.forEach(function(e){e.count&&(e.userId="555045850",e.branchId=7,e.foodId=e.foodId,t.push(e))}):this.foods.forEach(function(e){e.count&&(e.userId="555045850",e.branchId=7,e.foodId=e.id,t.push(e))}),console.log("选择的食物"),console.log(t),t}},methods:{goBack:function(){this.$router.go(-1)},_drop:function(t){var e=this;this.$nextTick(function(){e.$refs.shopcart.drop(t)})},_initScroll:function(){this.foodsScroll=new l.a(this.$refs.foodswrapper,{click:!0})},_calculateHeight:function(){var t=this.$refs.foodswrapper.getElementsByClassName("food-list-hook"),e=0;this.listHeight.push(e);for(var s=0;s<t.length;s++){e+=t[s].clientHeight,this.listHeight.push(e)}}},components:{"v-header":_,shopcart:C,cartcontrol:v}},b={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"goods"},[s("van-nav-bar",{attrs:{title:"周末打包","left-text":"返回","left-arrow":""},on:{"click-left":t.goBack}}),t._v(" "),t.showLoading?s("van-loading",{attrs:{type:"spinner"}}):t._e(),t._v(" "),s("div",{staticClass:"goond-content"},[s("div",{ref:"foodswrapper",staticClass:"foods-wrapper"},[s("ul",t._l(t.foods,function(e){return s("li",{key:e.key,staticClass:"food-item border-1px food-list-hook"},[s("div",{staticClass:"content"},[s("h2",{staticClass:"name"},[t._v(t._s(e.foodName))]),t._v(" "),s("div",{staticClass:"extra"},[s("span",{staticClass:"count"},[t._v("(每份"+t._s(e.eachCount)+"个)")])]),t._v(" "),s("div",{staticClass:"price"},[s("span",{staticClass:"now"},[t._v("￥"+t._s(e.foodPrice))])]),t._v(" "),s("div",{staticClass:"cartcontrol-wrapper"},[s("cartcontrol",{attrs:{food:e},on:{"cart-add":t._drop}})],1)])])}),0)]),t._v(" "),s("shopcart",{ref:"shopcart",attrs:{"select-foods":t.selectFoods,appl:t.appl}})],1)],1)},staticRenderFns:[]};var k=s("VU/8")(y,b,!1,function(t){s("vMDq")},null,null).exports,x={components:{goods:k}},A={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view",[e("goods")],1)],1)},staticRenderFns:[]};var B=s("VU/8")(x,A,!1,function(t){s("BtY8")},null,null).exports,O=s("/ocq"),H=(s("3Lne"),s("SSsa")),S={data:function(){return{statusMsg:"",showLoading:!0,appls:[]}},beforeCreate:function(){document.querySelector("body").setAttribute("style","background-color:#F5F5F5")},beforeDestroy:function(){document.querySelector("body").removeAttribute("style")},created:function(){var t=this;window.webkit.messageHandlers.WKMesesgaSignal.postMessage("Test JS"),window.sayHelloCallBack=this.sayHelloCallBack,this.$http({method:"post",url:"https://zhl.lululuye.xyz/wpark_test/order/canteen-order/queryOrder",data:{userId:"555045850"}}).then(function(e){t.showLoading=!1,e=e.data,console.log(e),200===e.resultCode?t.appls=e.resultData:(Object(n.a)({message:e.resultMsg}),console.log(e.resultMsg))}).catch(function(e){t.showLoading=!1,Object(n.a)({message:"服务器开小差，请联系管理员！"}),console.log(e)})},methods:{sayHelloCallBack:function(){return alert("你好"),"you get me"},goBack:function(){this.$router.go(-1)},addAction:function(){this.$router.push({name:"goods"})},updateOrder:function(t){console.log(t),this.$router.push({path:"/",query:{updateAppl:h()(t)}})},deleteOrder:function(t){console.log(t);var e=t.foodOrders[0].foodId;console.log(e),this.$http({method:"post",url:"https://zhl.lululuye.xyz/wpark_test/order/canteen-order/deleteCanteenOrder",data:{userNum:555045850,foodId:e,createTime:t.creatTime,applNum:t.appNum,status:t.status}}).then(function(t){t=t.data,console.log(t),200===t.resultCode?location.reload():(Object(n.a)({message:t.resultMsg}),console.log(t.resultMsg))}).catch(function(t){Object(n.a)({message:"服务器开小差，请联系管理员！"}),console.log(t)})}},components:d()({"v-header":_},H.a.name,H.a)},z={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"order"},[o("van-nav-bar",{staticClass:"nav-top",attrs:{title:"我的订单","left-text":"返回","left-arrow":""},on:{"click-left":t.goBack}}),t._v(" "),t.showLoading?o("van-loading",{attrs:{size:"30px",type:"spinner"}}):t._e(),t._v(" "),o("div",{staticClass:"order-list"},t._l(this.appls,function(e){return o("div",{key:e.id,staticClass:"order-card"},[o("div",{staticClass:"order-card-head"},[o("div",{staticClass:"head-logo"},[o("img",{attrs:{src:s("7esB")}}),t._v(" "),o("div",{staticClass:"head-title"},[t._v(t._s(e.applNum))])]),t._v(" "),0===e.status?o("div",{staticClass:"order-status"},[t._v("\n          打包中 \n        ")]):1===e.status?o("div",{staticClass:"order-status"},[t._v("\n          已完成\n        ")]):2===e.status?o("div",{staticClass:"order-status"},[t._v("\n          已取消\n        ")]):t._e()]),t._v(" "),o("div",{staticClass:"order-card-body"},[t._l(e.foodOrders,function(e){return o("div",{key:e.id,staticClass:"card-body-content"},[o("div",{staticStyle:{"font-weight":"330"}},[t._v(t._s(e.foodName)+" \n           "),o("span",{staticClass:"menu-content"},[t._v("(每份"+t._s(e.foodPrice)+"元，每份"+t._s(e.eachCount)+"个)")])]),t._v(" "),o("div",[t._v("x"+t._s(e.count))])])}),t._v(" "),o("div",{staticClass:"card-body-total"},[o("div",{staticStyle:{"font-size":"12px"}},[t._v("总价 ¥"),o("span",{staticStyle:{"font-size":"25px","font-weight":"330"}},[t._v(t._s(e.foodSumPrice))])])])],2),t._v(" "),o("div",{staticStyle:{height:"1px",background:"lightgray",opacity:"0.7",margin:"0px 16px"}}),t._v(" "),o("div",{staticClass:"order-card-bottom"},[o("div",{staticClass:"order-card-date"},[t._v(t._s(e.creatTime))]),t._v(" "),0===e.status?o("div",[o("button",{staticClass:"cancel-button",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.deleteOrder(e)}}},[t._v("取消订单")])]):2===e.status?o("div",[o("button",{staticClass:"delete-button",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.deleteOrder(e)}}},[t._v("删除订单")])]):t._e()])])}),0),t._v(" "),o("van-button",{staticClass:"add-button",attrs:{type:"default"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addAction()}}},[o("van-icon",{attrs:{name:"add"}}),t._v(" 新增订单\n  ")],1)],1)},staticRenderFns:[]};var M=s("VU/8")(S,z,!1,function(t){s("1ihN")},"data-v-c078096a",null).exports;i.a.use(O.a);var D=new O.a({model:"history",linkActiveClass:"active",routes:[{path:"/header",name:"header",component:_},{path:"/goods",name:"goods",component:k},{path:"/",name:"order",component:M}]}),T=s("mtWM"),F=s.n(T);s("34KM");i.a.use(r.a),i.a.use(a.a),i.a.use(n.a),i.a.use(o.a),i.a.config.productionTip=!1,i.a.prototype.$http=F.a,new i.a({el:"#app",router:D,components:{App:B},template:"<App/>"})},cHJS:function(t,e){},hW8u:function(t,e){},nLpc:function(t,e){},nOtf:function(t,e){},nsZj:function(t,e){},vMDq:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.7a2c41aa6c0061378c5e.js.map